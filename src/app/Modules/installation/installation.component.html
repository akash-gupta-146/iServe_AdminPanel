<div class="main-content">
    <div class="container-fluid">
      <div class="card">
        <div class="card-header  card-header-danger ">
  
          <h4 class="card-title">Incident</h4>
  
          <ul>
            <li *ngFor="let status of statusHeading let i=index">
              <a [class.active]="i==selectedHeadingIndex" (click)="filtterIncidents(i)">{{status}}</a>
            </li>
  
          </ul>
        </div>
  
  
  
        <div class="card-body">
          <div class="search-results" infiniteScroll [infiniteScrollDistance]="1" [infiniteScrollThrottle]="0" (scrolled)="onScroll()"
            [scrollWindow]="false">
            <div class="table-responsive" id="coll">
              <table class="table table-hover ">
  
                <thead class=" text-primary">
          
                  <th *ngFor="let head of headerRow">{{ head }}</th>
               
                </thead>
                <tbody *ngFor="let row of filtercomplaints let i =index">
  
  
                  <tr data-toggle="collapse" attr.href="#collapseExample{{i}}">
                    <td>{{i+1}}</td>
                    <td>{{row.createdAt | date: 'ddMMM,yyyy'}}</td>
                    <td>{{row.productName}}</td>
                    <td>
                      <p>{{row.title}}</p>
                    </td>
                    <td>{{row.againstCategoryName}}</td>
                    <td>{{row.priority}}</td>
                    <!-- <td><mat-chip-list class="mat-chip-list-stacked">
                        <mat-chip  selected [color]="row.statusColor">
                          {{row.statusName}}
                        </mat-chip>
                      </mat-chip-list>
                     
                    </td> -->
                    <td>
                      <span class="badge" [ngClass]="row.statusName">{{ row.statusName }}</span>
                    </td>
                    <!-- <td>
  
                      <a class="collapsed" role="button" (click)="dropDown(i)" data-toggle="collapse" data-parent="#accordion" href="#{{i}}" aria-expanded="false"
                        aria-controls="collapseOne">
                        <i class="fa fa-angle-down" style="font-size:45px; margin-left: 40px; color:rgb(10, 10, 10)"></i>
  
                      </a>
  
  
                    </td> -->
  
  
                    <td class="d-flex justify-content-between action-buttons">
                      <!-- <i class="material-icons">edit</i> -->
                      <i class="material-icons collapse-icon" (click)="getId(row.id)" >expand_more</i>
                  </td>
                  </tr>
                  <!-- <tr class="collapse" attr.id="collapseExample{{i}}">
                    <td colspan="9">
  
                      <div class="row">
                        <h5>
                          <b>Description:</b>
                          <br>{{row.description}}</h5>
                        <div class="col-md-6">
                          <div class="card">
                            <div class="row">
                              <h4>
                                <b>Product Details</b>
                              </h4>
                              <div class="col-md-4">
                                <img style="width:70px" src="{{row.registeredProductPicUrl}}">
                              </div>
                              <div class="col-md-8">
                                <h5>
                                  <b>Modal:</b>{{row.productModelNumber}} </h5>
                                <h5>
                                  <b>Category:</b> {{row.productCategoryName}}</h5>
                                <h5>
                                  <b>Purchase Date: </b>{{ row.productPurchaseDate| date: 'dd MMM ,yyyy'}} </h5>
                                <h5>
                                  <b>Warranty Expire on :</b> {{row.productWarrantyEnd | date: 'dd MMM ,yyyy'}}</h5>
                                <h5>
                                  <b>Registration No. :</b>{{row.productRegistrationId}} </h5>
                              </div>
                            </div>
                          </div>
                          <div class="card">
                            <div class="row">
                              <h4>
                                <b>Dealer Details</b>
                              </h4>
                              <div class="col-md-4">
                                <img style="width:70px" src="/assets/nyaz khan.jpeg">
                              </div>
                              <div class="col-md-8">
                                <h5>
                                  <b>Name:</b>{{row.dealerName}} </h5>
                                <h5>
                                  <b>Phone:</b>{{row.dealerContact}} </h5>
                                <h5>
                                  <b>Email:</b>{{row.dealerEmail}} </h5>
                                <h5>
                                  <b>Address:</b>{{row.dealerAddress}}</h5>
                              </div>
                            </div>
                          </div>
                          <div class="card" *ngIf="row.statusName== 'Fixed'">
                            <div class="row" *ngIf="row.fixedInfo[0].statusName==='Fixed'">
                              <h4>
                                <b>Fixed Info</b>
                              </h4>
                              <div class="col-md-4">
                                <img style="width:70px" src="{{row.fixedInfo[0].picUrl}}">
                              </div>
                              <div class="col-md-8">
                                <h5>
                                  <b>Date:</b>{{row.fixedInfo[0].createdAt | date: 'dd MMM ,yyyy'}}</h5>
                                <h5>
                                  <b>Time:</b>{{row.fixedInfo[0].createdAt | date: 'hh:mm a'}}</h5>
                                <h5>
                                  <b>Address:</b>
                                </h5>
                                <h5>
                                  <b>Comment:</b>{{row.fixedInfo[0].autoComment}}</h5>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-6">
                          <div class="card">
                            <div class="row">
                              <h4>
                                <b>Customer Details</b>
                              </h4>
                              <div class="col-md-4">
                                <img style="width:70px" src="{{row.registeredProductPicUrl}}">
                              </div>
                              <div class="col-md-8">
                                <h5>
                                  <b>Name:</b>{{row.customerName}} </h5>
                                <h5>
                                  <b>Phone:</b>{{row.customerContactNo}} </h5>
                                <h5>
                                  <b>Email:</b>{{row.customerEmail}} </h5>
                                <h5>
                                  <b>Address:</b>{{row.customerAddress}} , {{row.customerCity}} , {{row.customerState}} ,
                                  <br> {{row.customerCountry}} ,{{row.customerPostalCode}} </h5>
                              </div>
                            </div>
                          </div>
  
  
                          <div class="card">
                            <div class="row" *ngIf="!(row.assignedServiceEngineerName==null)">
                              <h4>
                                <b>Appointed Engineer</b>
                              </h4>
                              <div class="col-md-4">
                                <img style="width:70px" src="{{row.assignedServiceEngineerPicUrl}}">
                              </div>
                              <div class="col-md-8">
                                <h5>
                                  <b>Name:</b>{{row.assignedServiceEngineerName}} </h5>
                                <h5>
                                  <b>Phone:</b>{{row.assignedServiceEngineerContactNo}} </h5>
                                <h5>
                                  <b>Email:</b>{{row.assignedServiceEngineerEmail}} </h5>
                                <div>
                                  <button type="button" data-toggle="modal" data-target="#myModal3" class="button button3" style="color:rgb(255, 0, 0)">
                                    <i style="font-size:24px" class="	fa fa-times"></i> Change</button>
  
                                  <div class="modal fade" id="myModal3" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                                    <div class="modal-dialog" role="document">
                                      <div class="modal-content">
                                        <div class="modal-header">
                                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                          </button>
                                          <h4 class="modal-title" id="myModalLabel">Change</h4>
                                        </div>
                                        <div class="modal-body">
                                          <form (ngSubmit)="onSubmit()">
                                            <div class="row">
                                              <div class="col-md-6">
                                                <div class="form-group">
                                                  <label for="comment" class="control-label">Comment:</label>
                                                  <textarea required [(ngModel)]="comment" name="comment" class="form-control"></textarea>
                                                </div>
                                                <div class="form-group">
                                                  <label for="pic " class="control-label">Upload Image</label>
                                                  <input type="file" (change)="onSelectFile($event)" class="form-control">
                                                </div>
                                              </div>
                                              <div *ngIf="!(url==null)" class="col-md-6">
  
                                                <img [src]="urlTOShowImg" style="height: 150px;">
  
                                              </div>
                                            </div>
                                            <div class="modal-footer">
                                              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                              <button type="submit" class="btn btn-success">Submit</button>
                                            </div>
                                          </form>
  
  
                                        </div>
  
  
  
  
  
  
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="card">
                          <div class="row" *ngIf="row.statusName=='Fixed'">
                            <h4>
                              <b>Feedback</b>
                            </h4>
                            <div class="col-md-4">
                              <img style="width:70px" src="{{row.signatureUrl}}">
                            </div>
                            <div class="col-md-8">
                              <h5>
                                <b>Date:</b>
                              </h5>
                              <h5>
                                <b>Time:</b>
                              </h5>
                              <h5>{{row.rating}} </h5>
                              <h5>
                                <b>Comment:</b>
                              </h5>
                            </div>
                          </div>
                        </div>
                      </div>
                      
                      <div style="text-align: center">
  
                        <button *ngIf="row.statusName=='New'" (click)="getAssingedId(row.id)" type="button" data-toggle="modal" data-target="#myModal2"
                          class="button button1" style="font-size:15px;color:rgb(129, 243, 129)">
                          <i style="font-size:24px" class="fa fa-file-text-o"></i> ASSINGED</button>
                        <div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                          <div class="modal-dialog" role="document">
                            <div class="modal-content">
                              <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                  <span aria-hidden="true">&times;</span>
                                </button>
                                <h4 class="modal-title" id="myModalLabel">ASSINGED</h4>
                              </div>
                              <div class="modal-body">
                                <form (ngSubmit)="onSubmit()">
                                  <div class="row">
                                    <div class="col-md-6">
                                      <div class="form-group">
                                        <label for="comment" class="control-label">Comment:</label>
                                        <textarea required [(ngModel)]="comment" name="comment" class="form-control"></textarea>
                                      </div>
  
                                    </div>
                                    <div *ngIf="!(url==null)" class="col-md-6">
  
                                      <img [src]="urlTOShowImg" style="height: 150px;">
  
                                    </div>
                                  </div>
                                  <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                    <button type="submit" class="btn btn-success">Submit</button>
                                  </div>
                                </form>
  
  
                              </div>
  
  
  
  
  
  
                            </div>
                          </div>
                        </div>
  
  
  
  
                        <button (click)="getCommentsId(row.id)" type="button" data-toggle="modal" data-target="#myModal" class="button button2" style="font-size:15px;color:rgb(226, 48, 188)">
                          <i style="font-size:24px" class="fa fa-file-text-o"></i>COMMENT</button>
  
                        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                          <div class="modal-dialog" role="document">
                            <div class="modal-content">
                              <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                  <span aria-hidden="true">&times;</span>
                                </button>
                                <h4 class="modal-title" id="myModalLabel">History</h4>
                              </div>
                              <div class="modal-body">
                                <div class="card">
                                  <div *ngIf="commentsHistory==0">
                                    <h3> New customer No History Available</h3>
                                  </div>
                                  <div *ngFor="let comlaint of commentsHistory let i=index ">
  
                                    <div style="text-align: left" class="row" *ngIf="commentsHistory.lenght!==0">
  
                                      <h4>
                                        <b>{{comlaint.statusName}}</b>
                                      </h4>
                                      <div class="col-md-6">
                                        <img style="width:70px" src="{{comlaint.picUrl}}">
                                      </div>
                                      <div class="col-md-6">
                                        <h5>
                                          <b>Name:</b>{{comlaint.name }}</h5>
                                        <h5>
                                          <b>Create at:</b>{{comlaint.createdAt | date: 'dd MMM ,yyyy'}}</h5>
                                        <h5>
                                          <b>Schedule Date:</b>{{comlaint.scheduleDate| date: 'dd MMM ,yyyy'}}</h5>
                                        <h5>
                                          <b>Comment:</b>{{comlaint.autoComment}}</h5>
                                        <h5>
                                          <b>Auto Comment:</b>{{comlaint.autoComment}}</h5>
  
                                      </div>
  
                                    </div>
                                  </div>
  
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
  
  
  
                        <button (click)="getRejectId(row.id)" type="button" data-toggle="modal" data-target="#myModal1" class="button button3" style="color:rgb(255, 0, 0)">
                          <i style="font-size:24px" class="	fa fa-times"></i> REJECTED</button>
  
                        <div class="modal fade" id="myModal1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                          <div class="modal-dialog" role="document">
                            <div class="modal-content">
                              <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                  <span aria-hidden="true">&times;</span>
                                </button>
                                <h4 class="modal-title" id="myModalLabel">Reject</h4>
                              </div>
                              <div class="modal-body">
                                <form (ngSubmit)="onSubmit()">
                                  <div class="row">
                                    <div class="col-md-6">
                                      <div class="form-group">
                                        <label for="comment" class="control-label">Comment:</label>
                                        <textarea required [(ngModel)]="comment" name="comment" class="form-control"></textarea>
                                      </div>
                                      <div class="form-group">
                                        <label for="pic " class="control-label">Upload Image</label>
                                        <input type="file" (change)="onSelectFile($event)" class="form-control">
                                      </div>
                                    </div>
                                    <div *ngIf="!(url==null)" class="col-md-6">
  
                                      <img [src]="urlTOShowImg" style="height: 150px;">
  
                                    </div>
                                  </div>
                                  <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                    <button type="submit" class="btn btn-success">Submit</button>
                                  </div>
                                </form>
  
  
                              </div>
  
  
  
  
  
  
                            </div>
                          </div>
                        </div>
                      </div> -->
  
                      <tr class="collapse" attr.id="collapseExample{{i}}">
                          <td colspan=8 class=" incident-details">
                              <div class="row p-2">
                                  <div class="col-lg-12" *ngIf="row.description">
                                      <b>Description</b>
                                      <br>
                                      <p>
                                         {{ row.description }}
                                      </p>
                                    </div>
                                <div class="col-sm-12 col-md-6 col-lg-4 incident-detail-box" >
                                  <div class="row">
                                    <div class="collg-12 col-sm-12">
                                      <b>Product Details</b>
                                    </div>
                                    <div class="col-sm-3 col-md-3 col-lg-3">
                                      <img class="product-image" [src]="row.productImage" />
                                    </div>
                                    <div class="col-sm-9 col-md-9 col-lg-9">
                                      <div>
                                          <b>Modal: </b> {{ row.productName }}
                                      </div>
                                      <div>
                                        <b>Category:</b> {{ row.productCategory }}
                                      </div>
                                      <div>
                                          <b>Purchase Date:</b> {{ row.productPurchaseDate }}
                                        </div>
                                        <div>
                                            <b>M.R.P.:</b>{{ row.mrp }}
                                          </div>
                                          <div>
                                              <b>Registration No:</b>{{ row.productRegNo }}
                                            </div>    
                                      </div>
                                  </div>
                                </div>
                                <div class="col-sm-12 col-md-6 col-lg-4 incident-detail-box" >
                                    <div class="row">
                                        <div class="col-lg-12 col-sm-12">
                                            <b>Customer Details</b>
                                          </div>
                                        <div class="col-sm-3 col-md-3 col-lg-3">
                                          <img class="product-image" [src]="row.customerImage" />
                                        </div>
                                        <div class="col-sm-9 col-md-9 col-lg-9">
                                            <div>
                                                <b>Name: </b> {{ row.customerName }}
                                            </div>
                                            <div>
                                              <b>Phone:</b> +91 {{ row.customerPhone }}
                                            </div>
                                            <div>
                                                <b>Email:</b> {{ row.customerEmail }}
                                              </div>
                                              <div>
                                                  <b>Address:</b> {{ row.customerAddress }}
                                              </div>
                                          </div>
                                      </div>
                                  </div>
                                  <div class="col-sm-12 col-md-6 col-lg-4 incident-detail-box" >
                                      <div class="row">
                                          <div class="collg-12 col-sm-12">
                                              <b>Dealer Details</b>
                                            </div>
                                          <div class="col-sm-3 col-md-3 col-lg-3">
                                            <img class="product-image" [src]="row.dealerImage" />
                                          </div>
                                          <div class="col-sm-9 col-md-9 col-lg-9">
                                              <div>
                                                  <b>Name: </b> {{ row.dealerName }}
                                              </div>
                                              <div>
                                                <b>Phone:</b> {{ row.dealerPhone }}
                                              </div>
                                              <div>
                                                  <b>Email:</b> {{ row.dealerEmail }}
                                                </div>
                                                <div>
                                                    <b>Address:</b> {{ row.dealerAddress }}
                                                  </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-4 incident-detail-box" >
                                        <div class="row">
                                            <div class="collg-12 col-sm-12 ">
                                                <b>Appointed Engineer</b>
                                              </div>
                                            <div class="col-sm-3 col-md-3 col-lg-3">
                                              <img class="product-image" [src]="row.engineerImage" />
                                            </div>
                                            <div class="col-sm-9 col-md-9 col-lg-9">
                                                <div>
                                                    <b>Name: </b> {{ row.engineerName }}
                                                </div>
                                                <div>
                                                  <b>Phone:</b> {{ row.engineerPhone }}
                                                </div>
                                                <div>
                                                    <b>Email:</b>{{ row.engineerEmail }} 
                                                  </div>
                                                  <button class="btn-sm btn-danger float-right">Change</button>
                                              </div>
                                              
                                          </div>
                                      </div>
                                      <div class="col-sm-12 col-md-6 col-lg-4 incident-detail-box">
                                          <div class="row">
                                              <div class="collg-12 col-sm-12">
                                                  <b>Schedule Details</b>
                                                </div>
                                              <div class="col-sm-3 col-md-3 col-lg-3">
                                                <img class="product-image" src="http://www.digitalistmag.com/files/2012/09/273949_l_srgb_s_gl.jpg" />
                                              </div>
                                              <div class="col-sm-9 col-md-9 col-lg-9">
                                                  <div>
                                                    <b>Date:</b> {{ row.scheduleDate }} 
                                                  </div>
                                                  <div>
                                                      <b>Time:</b> {{ row.scheduleTime }} 
                                                    </div>
                                                    <div>
                                                        <b>Address:</b> {{ row.scheduleAddress }} 
                                                      </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-4 incident-detail-box" >
                                            <div class="row">
                                                <div class="collg-12 col-sm-12">
                                                    <b>Fixed Info</b>
                                                  </div>
                                                <div class="col-sm-3 col-md-3 col-lg-3">
                                                  <img class="product-image" [src]="row.fixedSignature" />
                                                </div>
                                                <div class="col-sm-9 col-md-9 col-lg-9">
                                                    <div>
                                                      <b>Date:</b>{{ row.fixedDate }} 
                                                    </div>
                                                    <div>
                                                        <b>Time:</b> {{ row.fixedTime }} 
                                                      </div>
                                                      <div>
                                                          <b>Address:</b> {{ row.fixedAddress }} 
                                                        </div>
                                                        <div>
                                                            <b>Comment:</b> {{ row.fixedComment }} 
                                                          </div>
                                                  </div>
                                                  <!-- <div class="col-sm-12 col-md-6 col-lg-6">
                                                      <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                                                          <div class="carousel-inner">
                                                            <div class="carousel-item active">
                                                              <img class="d-block w-100" src="https://static.shoplightspeed.com/shops/607472/files/005302127/sony-sony-kd60x690e.jpg" alt="First slide">
                                                            </div>
                                                            <div class="carousel-item">
                                                              <img class="d-block w-100" src="https://http2.mlstatic.com/oferta-pantalla-smart-tv-70-pulgadas-led-4k-sony-hdr-D_NQ_NP_644425-MLM25979395100_092017-F.jpg" alt="Second slide">
                                                            </div>
                                                            <div class="carousel-item">
                                                              <img class="d-block w-100" src="https://s-media-cache-ak0.pinimg.com/originals/d7/72/9f/d7729f6f8ae1e0eaba72eb229428c5ef.jpg" alt="Third slide">
                                                            </div>
                                                          </div>
                                                          <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                                                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                                            <span class="sr-only">Previous</span>
                                                          </a>
                                                          <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                                                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                                            <span class="sr-only">Next</span>
                                                          </a>
                                                        </div>
                                                  </div> -->
                                              </div>
                                          </div>
                                          <div class="col-sm-12 col-md-6 col-lg-4 incident-detail-box">
                                              <div class="row">
                                                  <div class="collg-12 col-sm-12">
                                                      <b>Not Fixed Info</b>
                                                    </div>
                                                  <div class="col-sm-3 col-md-3 col-lg-3">
                                                    <img class="product-image" src="http://icons.iconarchive.com/icons/paomedia/small-n-flat/1024/sign-warning-icon.png" />
                                                  </div>
                                                  <div class="col-sm-9 col-md-9 col-lg-9">
                                                      <div>
                                                        <b>Date:</b> {{ row.notFixedDate }} 
                                                      </div>
                                                      <div>
                                                          <b>Time:</b> {{ row.notFixedTime }} 
                                                        </div>
                                                        <div>
                                                            <b>Address:</b> {{ row.notFixedAddress }} 
                                                          </div>
                                                    </div>
                                                    <!-- <div class="col-sm-12 col-md-6 col-lg-6">
                                                        <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                                                            <div class="carousel-inner">
                                                              <div class="carousel-item active">
                                                                <img class="d-block w-100 m-auto" src="https://images-na.ssl-images-amazon.com/images/I/51NxHMWdjHL.jpg" alt="First slide">
                                                              </div>
                                                              <div class="carousel-item">
                                                                <img class="d-block w-100 m-auto" src="https://http2.mlstatic.com/oferta-pantalla-smart-tv-70-pulgadas-led-4k-sony-hdr-D_NQ_NP_644425-MLM25979395100_092017-F.jpg" alt="Second slide">
                                                              </div>
                                                              <div class="carousel-item">
                                                                <img class="d-block w-100 m-auto" src="https://s-media-cache-ak0.pinimg.com/originals/d7/72/9f/d7729f6f8ae1e0eaba72eb229428c5ef.jpg" alt="Third slide">
                                                              </div>
                                                            </div>
                                                            <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                                                              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                                              <span class="sr-only">Previous</span>
                                                            </a>
                                                            <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                                                              <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                                              <span class="sr-only">Next</span>
                                                            </a>
                                                          </div>
                                                    </div> -->
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-md-6 col-lg-4 incident-detail-box" >
                                                <div class="row">
                                                    <div class="collg-12 col-sm-12">
                                                        <b>Feedback</b>
                                                      </div>
                                                    <div class="col-sm-3 col-md-3 col-lg-3">
                                                      <img class="product-image" src="data:image/png;base64,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" />
                                                    </div>
                                                    <div class="col-sm-9 col-md-9 col-lg-9">
                                                        <div>
                                                          <b>Date:</b> 19/9/2018
                                                        </div>
                                                        <div>
                                                            <b>Time:</b> 1:00 PM
                                                          </div>
                                                          <div class="d-flex">
                                                              <i class="material-icons" style="color:orange;width: 25px;"> star_rate </i>
                                                              <i class="material-icons" style="color:orange;width: 25px;"> star_rate </i>
                                                              <i class="material-icons" style="color:orange;width: 25px;"> star_rate </i>
                                                              <i class="material-icons" style="color:orange;width: 25px;"> star_rate </i>
                                                              <i class="material-icons" style="color:gray;width: 25px;"> star_rate </i>
                                                          </div>
                                                          <div>
                                                            <b>Comment:</b> Skilled person and polite nature.
                                                          </div>
                                                      </div>
                                                  </div>
                                              </div>
                              </div>
                              <div class="d-flex justify-content-center">
                                  <button class="btn btn-sm btn-outline-success" type="submit" (click)="assign()" (click)= "getAssingedId(row.id)" ><i class="material-icons"> assignment_turned_in </i> Assign</button>
                                  <button class="btn btn-sm btn-outline-primary" type="submit" data-toggle="modal" (click)=" getCommentsId(row.id)" data-target="#commentModal"><i class="material-icons"> chat </i> History</button>
                                  <button class="btn btn-sm btn-outline-danger" type="submit" data-toggle="modal" data-target="#rejectModal" ><i class="material-icons"> clear </i> reject</button>
                              </div>
                          </td>
                        </tr>
   
                 
                </tbody>
                <tfoot>
                  <tr>
                    <td colspan="9" style="font-size: 70px; text-align: center;">
                      <i *ngIf="showLoader" class="fa fa-spinner fa-spin"></i>
                    </td>
                  </tr>
                </tfoot>
              </table>
            </div>
          </div>
        </div>
        <div class="card-footer moreButton">
  
          <button type="button" (click)="lodeMore()" class="btn btn-defalte">More</button>
  
        </div>
      </div>
  
    </div>
    <div class="col-md-2"></div>
  
  </div>
  
  
  
  <div class="modal" id="actionModal" tabindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
        <div class="modal-content   card card-stats">
            <div class="card-header card-header-success card-header-icon">
                <div class="card-icon">
                    <i class="material-icons">content_copy</i>
                </div>
                <p class="card-category">{{ modalTitle }}</p>
                <h3 class="card-title">TITLE</h3>
              </div>
          <div class="modal-body">
            <!-- <div class="assign-form">
              <div class="my-3 input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text">
                        <i class="material-icons"> category </i>
                    </span>
                  </div>
                  <select id="inputState" class="form-control">
                      <option selected>Choose Category</option>
                      <option>.xsd</option>
                      <option>.xsd</option>
                      <option>.xsd</option>
                      <option>.xsd</option>
                    </select>
                </div>
                <div class="my-3 input-group">
                    <div class="input-group-prepend">
                      <span class="input-group-text">
                          <i class="material-icons"> category </i>
                      </span>
                    </div>
                    <select id="inputState" class="form-control">
                        <option selected>Choose Sub Category</option>
                        <option>.xsd</option>
                        <option>.xsd</option>
                        <option>.xsd</option>
                        <option>.xsd</option>
                      </select>
                  </div>
                  <div class="my-3 input-group">
                      <div class="input-group-prepend">
                        <span class="input-group-text">
                            <i class="material-icons"> chat </i>
                        </span>
                      </div>
                      <input type="text" class="form-control" placeholder="Add Comment">
                    </div>
                    <div class="my-3 input-group">
                        <div class="input-group-prepend">
                          <span class="input-group-text">
                              <i class="material-icons" data-success> low_priority </i>
                          </span>
                        </div>
                        <select id="inputState" class="form-control">
                            <option selected>Choose Priority</option>
                            <option>High</option>
                            <option>Low</option>
                            <option>Medium</option>
                          </select>
                      </div>
                      <div class="my-2  allow-comments">
                          <div class="input-group">
                              <div class="input-group-prepend">
                                <span class="input-group-text">
                                    <i class="material-icons" data-success> chat </i> 
                                    Allow Comments
                                </span>
                              </div>
                          </div>
                          <div calss="input-group d-flex justify-content-between">
                              <div class="form-check form-check-inline mx-5">
                                  <label class="form-check-label">
                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2"> All
                                    <span class="form-check-sign">
                                        <span class="check"></span>
                                    </span>
                                  </label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <label class="form-check-label">
                                      <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2"> Manager
                                      <span class="form-check-sign">
                                          <span class="check"></span>
                                      </span>
                                    </label>
                                  </div>
                                  <div class="form-check form-check-inline">
                                      <label class="form-check-label">
                                        <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2"> Customer
                                        <span class="form-check-sign">
                                            <span class="check"></span>
                                        </span>
                                      </label>
                                    </div>
                                  </div>
                      </div>
                    </div> -->

                    
                    <form (ngSubmit)="onSubmit()">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="comment" class="control-label">Comment:</label>
                                <textarea  [(ngModel)]="assingedEngineer.comment" name="comment" class="form-control"></textarea>
                                </div>
                                <div class="form-group">
                                    <select class="form-control"  name="assingedEngineer" required multiple [(ngModel)]="assingedEngineer.serviceEngineerId">
                                    <option *ngFor="let product of listServiceEngineer" [value]="product.id">{{product.name}}</option>
                                </select>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            <button type="submit" class="btn btn-success">Submit</button>
                        </div>
                    </form>
  
                  </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-success">Assign</button>
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
  
    <!-- Chat Modal -->
  <div class="modal fade" id="commentModal" tabindex="-1" role="dialog" aria-labelledby="commentModal" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content card card-stats">
            <div class="card-header card-header-primary card-header-icon">
                <div class="card-icon">
                    <i class="material-icons">chat</i>
                </div>
                <h3 class="card-title">History</h3>
              </div>
          <div class="modal-body">
              <div class="card">
                  <div *ngIf="commentsHistory==0">
                      <h3> New customer No History Available</h3>
                  </div>
                  <div *ngFor="let comlaint of commentsHistory let i=index ">
  
                      <div style="text-align: left" class="row" *ngIf="commentsHistory.lenght!==0">
  
                          <h4>
                              <b>{{comlaint.statusName}}</b>
                          </h4>
                          <div class="col-md-6">
                              <img style="width:70px" src="{{comlaint.picUrl}}">
                          </div>
                          <div class="col-md-6">
                              <h5>
                                  <b>Name:</b>{{comlaint.name }}</h5>
                              <h5>
                                  <b>Create at:</b>{{comlaint.createdAt | date: 'dd
                                  MMM ,yyyy'}}</h5>
                              <h5>
                                  <b>Schedule Date:</b>{{comlaint.scheduleDate| date:
                                  'dd MMM ,yyyy'}}</h5>
                              <h5>
                                  <b>Comment:</b>{{comlaint.autoComment}}</h5>
                              <h5>
                                  <b>Auto Comment:</b>{{comlaint.autoComment}}</h5>
  
                          </div>
  
                      </div>
                  </div>
  
              </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary">Add Comment</button>
          </div>
        </div>
      </div>
    </div>
  <!-- End of chat modal -->
  
    <!-- Reject Modal -->
    <div class="modal fade" id="rejectModal" tabindex="-1" role="dialog" aria-labelledby="rejectModal" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content card card-stats">
              <div class="card-header card-header-danger card-header-icon">
                  <div class="card-icon">
                      <i class="material-icons">close</i>
                  </div>
                  <h3 class="card-title">Reject</h3>
                </div>
            <div class="modal-body">
               
                <form (ngSubmit)="onSubmit()" #rejectForm="ngForm">
                    <div class="row">
                      <div class="col-md-6">
                        <mat-form-field class="example-full-width">
                          <input type="text" matInput required  [(ngModel)]="rejectComplaint.comment" 
                          name="comment" placeholder="Comment" #comment="ngModel">
  
                        </mat-form-field>
                      </div>
                      <mat-form-field class="example-full-width">
                          <input type="file"  required   (change)="onSelectFile($event)"
                          name="comment" placeholder="Comment" >
  
                        </mat-form-field>
  <!--                     
                            <div class="custom-file">
                                <input type="file" class="custom-file-input" >
                                <label class="custom-file-label" for="customFile">Choose file</label >
                              </div> -->
                              
                              <div class="modal-footer">
                                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                  <button type="submit" class="btn btn-danger">Reject</button>
                                </div>
                       
                  
                   </div>
                </form>
  
  
  
            
          </div>
        </div>
      </div>
      </div>
    <!-- End of reject modal -->